<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!--FontAwesome Kit Code-->
    <script src="https://kit.fontawesome.com/4e9921963f.js" crossorigin="anonymous"></script>
    <title>Profile Builder</title>



</head>

<body>
    <div class="container">
        <h2 class="font-weight-bold mt-3 mb-3">
            Tell Us About Yourself:
        </h2>
        <hr>

        <!-- Name & Photo Input-->
        <form id="profileForm">
            <div class="form-group font-weight-bold">
                <label for="name">Name (Required): </label>
                <input type="name" class="form-control" id="name-input">
                <small id="name-sub-text" class="form-text text-muted">We'll never share your info with anyone
                    else.</small>
            </div>
            <div class="form-group font-weight-bold">
                <label for="photo-url">Photo URL (Required):</label>
                <input type="url" class="form-control" id="photo-url">
            </div>



            <!--Survey Questions-->
            <hr>
            <h3 class="font-weight-bold mt-3 mb-3">Survey Questions:</h3>
            <p>1 - Strongly Disagree | 2 - Disagree | 3 - Moderate | 4 - Agree | 5 - Strongly Agree</p>
            <!-- inline numbered buttons-->
            <!--Question 1-->

            <div id="Q1" class="mb-4 question-data">
                <h5 class="font-weight-bold">Question 1</h5>
                <h6>I am outgoing and like to try new activities</h6>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question1" value="1">
                    <label class="form-check-label" for="inlineRadio1">1</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question1" value="2">
                    <label class="form-check-label" for="inlineRadio2">2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question1" value="3">
                    <label class="form-check-label" for="inlineRadio3">3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question1" value="4">
                    <label class="form-check-label" for="inlineRadio4">4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question1" value="5">
                    <label class="form-check-label" for="inlineRadio5">5</label>
                </div>
            </div>
            <!--Question 2-->
            <div id="Q2" class="mb-4 question-data">
                <h5 class="font-weight-bold">Question 2</h5>
                <h6>Dogs are pets, while cats are monsters</h6>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question2" value="1">
                    <label class="form-check-label" for="inlineRadio1">1</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question2" value="2">
                    <label class="form-check-label" for="inlineRadio2">2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question2" value="3">
                    <label class="form-check-label" for="inlineRadio3">3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question2" value="4">
                    <label class="form-check-label" for="inlineRadio4">4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question2" value="5">
                    <label class="form-check-label" for="inlineRadio5">5</label>
                </div>
            </div>
            <!--Question 3-->
            <div id="Q3" class="mb-4 question-data">
                <h5 class="font-weight-bold">Question 3</h5>
                <h6>Fish are friends, not food</h6>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question3" value="1">
                    <label class="form-check-label" for="inlineRadio1">1</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question3" value="2">
                    <label class="form-check-label" for="inlineRadio2">2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question3" value="3">
                    <label class="form-check-label" for="inlineRadio3">3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question3" value="4">
                    <label class="form-check-label" for="inlineRadio4">4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question3" value="5">
                    <label class="form-check-label" for="inlineRadio5">5</label>
                </div>
            </div>
            <!--Question 4-->
            <div id="Q4" class="mb-4 question-data">
                <h5 class="font-weight-bold">Question 4</h5>
                <h6>Cereal is just another type of soup</h6>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question4" value="1">
                    <label class="form-check-label" for="inlineRadio1">1</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question4" value="2">
                    <label class="form-check-label" for="inlineRadio2">2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question4" value="3">
                    <label class="form-check-label" for="inlineRadio3">3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question4" value="4">
                    <label class="form-check-label" for="inlineRadio4">4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question4" value="5">
                    <label class="form-check-label" for="inlineRadio5">5</label>
                </div>
            </div>
            <!--Question 5-->
            <div id="Q5" class="mb-4 question-data">
                <h5 class="font-weight-bold">Question 5</h5>
                <h6>Pineapple belongs on pizza</h6>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question5" value="1">
                    <label class="form-check-label" for="inlineRadio1">1</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question5" value="2">
                    <label class="form-check-label" for="inlineRadio2">2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question5" value="3">
                    <label class="form-check-label" for="inlineRadio3">3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question5" value="4">
                    <label class="form-check-label" for="inlineRadio4">4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question5" value="5">
                    <label class="form-check-label" for="inlineRadio5">5</label>
                </div>
            </div>
            <!--Question 6-->
            <div id="Q6" class="mb-4 question-data">
                <h5 class="font-weight-bold">Question 6</h5>
                <h6>The chicken came before the egg</h6>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question6" value="1">
                    <label class="form-check-label" for="inlineRadio1">1</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question6" value="2">
                    <label class="form-check-label" for="inlineRadio2">2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question6" value="3">
                    <label class="form-check-label" for="inlineRadio3">3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question6" value="4">
                    <label class="form-check-label" for="inlineRadio4">4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question6" value="5">
                    <label class="form-check-label" for="inlineRadio5">5</label>
                </div>
            </div>
            <!--Question 7-->
            <div id="Q7" class="mb-4 question-data">
                <h5 class="font-weight-bold">Question 7</h5>
                <h6>Peter Pan is the best brand of peanut butter</h6>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question7" value="1">
                    <label class="form-check-label" for="inlineRadio1">1</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question7" value="2">
                    <label class="form-check-label" for="inlineRadio2">2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question7" value="3">
                    <label class="form-check-label" for="inlineRadio3">3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question7" value="4">
                    <label class="form-check-label" for="inlineRadio4">4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question7" value="5">
                    <label class="form-check-label" for="inlineRadio5">5</label>
                </div>
            </div>
            <!--Question 8-->
            <div id="Q8" class="mb-4 question-data">
                <h5 class="font-weight-bold">Question 8</h5>
                <h6>Cheesecake is not cake, but actually pie</h6>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question8" value="1">
                    <label class="form-check-label" for="inlineRadio1">1</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question8" value="2">
                    <label class="form-check-label" for="inlineRadio2">2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question8" value="3">
                    <label class="form-check-label" for="inlineRadio3">3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question8" value="4">
                    <label class="form-check-label" for="inlineRadio4">4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question8" value="5">
                    <label class="form-check-label" for="inlineRadio5">5</label>
                </div>
            </div>
            <!--Question 9-->
            <div id="Q9" class="mb-4 question-data">
                <h5 class="font-weight-bold">Question 9</h5>
                <h6>Orange juice is better with pulp</h6>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question9" value="1">
                    <label class="form-check-label" for="inlineRadio1">1</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question9" value="2">
                    <label class="form-check-label" for="inlineRadio2">2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question9" value="3">
                    <label class="form-check-label" for="inlineRadio3">3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question9" value="4">
                    <label class="form-check-label" for="inlineRadio4">4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question9" value="5">
                    <label class="form-check-label" for="inlineRadio5">5</label>
                </div>
            </div>

            <!--Question 10-->
            <div id="Q10" class="mb-4 question-data">
                <h5 class="font-weight-bold">Question 10</h5>
                <h6>GIF is actually pronounced "JIF"</h6>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question10" value="1">
                    <label class="form-check-label" for="inlineRadio1">1</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question10" value="2">
                    <label class="form-check-label" for="inlineRadio2">2</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question10" value="3">
                    <label class="form-check-label" for="inlineRadio3">3</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question10" value="4">
                    <label class="form-check-label" for="inlineRadio4">4</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="question10" value="5">
                    <label class="form-check-label" for="inlineRadio5">5</label>
                </div>
            </div>

            <!--SUBMIT BUTTON AT BOTTOM OF FORM-->

            <button type="submit" class="btn btn-success btn-block btn-lg mb-4" id="find-friend">
                <i class="fas fa-pray"></i>
                Let's Find a Friend
                <i class="fas fa-pray"></i>
            </button>

        </form>


        <!--Links to API AND REPO-->

        <footer class="mb-4">
            <div id="footer-links">
                <!-- NEEEeeeeeeeeeeed tooooooo insertttttttt linkkkkkkk to API API-->
                <a href="/api/friends">
                    API Friends List
                </a>
                |
                <a href="https://github.com/stevencmann2/friend-finder">
                    Github Link
                </a>
                |
                <a href="/">
                    Home
                </a>

            </div>
        </footer>

    </div>

    <!--Friend Matched Modal -->
    <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">

                    <h5 class="modal-title"><strong>Friend Matched!</strong></h5>
                    <button type="button" class="close" data-dismiss="modal">
                        &times;
                    </button>
                </div>

                <div class="modal-body">
                    <h6 id="friendName"> </h6>
                    <img class="img-fluid" id="matchingPhoto"
                        src="https://cdn.shortpixel.ai/client/q_glossy,ret_img,w_324,h_216/https://www.boylanbottling.com/wp-content/uploads/2012/09/lemons-324x216.jpg"
                        alt="A picture of lemons, when life gives you lemons...." />

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>

                    </button>

                </div>

            </div>

        </div>
    </div>



    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <!-- <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
    </script> -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
    </script>

    <!-- JAVA SCRIPT FOR FORM LOGIC THAT WILL BE MOVED LATER -->
    <script type="text/javascript">
        $("#find-friend").click(function () {
            event.preventDefault();


            //get values from form:
            const profileName = $("#name-input").val().trim();
            const profilePhoto = $("#photo-url").val().trim();

            //Gather scores from radio button in an array 
            scoresArray = [];
            const q1 = parseInt($("input[name='question1']:checked").val());
            const q2 = parseInt($("input[name='question2']:checked").val());
            const q3 = parseInt($("input[name='question3']:checked").val());
            const q4 = parseInt($("input[name='question4']:checked").val());
            const q5 = parseInt($("input[name='question5']:checked").val());
            const q6 = parseInt($("input[name='question6']:checked").val());
            const q7 = parseInt($("input[name='question7']:checked").val());
            const q8 = parseInt($("input[name='question8']:checked").val());
            const q9 = parseInt($("input[name='question9']:checked").val());
            const q10 = parseInt($("input[name='question10']:checked").val());

            scoresArray.push(q1, q2, q3, q4, q5, q6, q7, q8, q9, q10);

            // Structures  data objectto be gathered
            let profileData = {
                name: profileName,
                photo: profilePhoto,
                scores: scoresArray
            }
            ///// Photo Validation searches URL for specific image types
            function photoValidation() {
                if (profileData.photo.toLowerCase().includes("jpeg") || profileData.photo.toLowerCase()
                    .includes("jpg") || profileData
                    .photo.toLowerCase().includes("png") || profileData.photo.toLowerCase().includes("gif")) {
                        if(profileData.photo.includes("www") || profileData.photo.includes("https") || profileData.photo.includes("image")){
                            return true;
                        }else{
                            alert(
                        'Please verify your Photo URL is a URL '
                    );
                    return false;
                        }
                       
                } else {
                    alert(
                        'Please use one of the following valid image formats: .jpeg, .jpg, .png, .gif'
                    );

                    return false;
                }
            }
            //validates name checks for blank value
            function nameValidator() {
                if (profileName === "") {
                    alert("Please include your name before continuing");
                    return false;
                }
                return true;
            };
            // validates radio buttons --- if all were answered
            function scoreValidator() {
                for (let i = 0; i < scoresArray.length; i++) {

                    if (isNaN(scoresArray[i])) {
                        alert("Please answer all the click box questions to find a friend");

                        return false;
                    }

                };
                return true;
            };

            //////// POST METHOD 
            function friendFinder() {

                const currentURL = window.location.origin;
                $.post(currentURL + "/api/friends", profileData, function (data) {
                    //looking to see if data was posted by user
                    if (data) {
                        alert("Looking for friends.....");
                        $("#friendName").text(data.name);
                        $("#matchingPhoto").attr("src", data.photo);
                        $("#myModal").modal('show');


                    } else {
                        alert("Hmm... Somethings not quite right, please check back later");
                    }


                })

            };

            /// form clear function 
            function formClear() {
                $("#name-input").val("");
                $("#photo-url").val("");
                $("input:radio").prop("checked", false);
                
            }


            ////// RUN FRONT END FORM VALIDATE & FORM CLEAR

            const nameComplete = nameValidator();
            const photoComplete = photoValidation();
            const scoreComplete = scoreValidator();
            console.log(profileData)
            if (nameComplete && photoComplete && scoreComplete) {
                // console.log('validation complete')
                friendFinder();
                formClear();
            }
        });
    </script>
</body>

</html>